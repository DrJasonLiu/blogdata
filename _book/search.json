[
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Data science of JasonLiu",
    "section": "",
    "text": "This is my personal website, or â€¦ A book"
  },
  {
    "objectID": "Rè¯­è¨€ç¼–ç¨‹-åŸºäºtidyverse.html",
    "href": "Rè¯­è¨€ç¼–ç¨‹-åŸºäºtidyverse.html",
    "title": "Rè¯­è¨€ç¼–ç¨‹-åŸºäºtidyverse",
    "section": "",
    "text": "Basic grammar of R datascience\næ›´æ–°Rå¯ä»¥ç”¨installråŒ…é‡Œçš„updateRå‡½æ•°\n\n> identical(0,1)#åˆ¤æ–­ä¸¤ä¸ªå¯¹è±¡æ˜¯å¦ä¸¥æ ¼ç›¸ç­‰\n>"
  },
  {
    "objectID": "Rè¯­è¨€ç¼–ç¨‹-åŸºäºtidyverse.html#rmarkdown",
    "href": "Rè¯­è¨€ç¼–ç¨‹-åŸºäºtidyverse.html#rmarkdown",
    "title": "Rè¯­è¨€ç¼–ç¨‹-åŸºäºtidyverse",
    "section": "Rmarkdown",
    "text": "Rmarkdown\n\nè¡Œå†…ä»£ç çš„ä½¿ç”¨ï¼šå¯æœ‰åŠ©äºç”Ÿæˆå¯é‡å¤æ€§æŠ¥å‘Šã€‚\n#r f(x)#å³ä¸ºè¡Œå†…ä»£ç (#æ¢ä¸º`)\nè¡Œé—´ä»£ç å—çš„è®¾ç½®: å‚è€ƒç½‘ç«™:https://yihui.org/knitr/options/\neval=Fæ˜¯æŒ‡å®šä¸è¿è¡Œä»£ç å—ï¼Œecol=Fè¡¨ç¤ºä¸æ˜¾ç¤ºä»£ç ï¼Œä½†æ˜¯æ˜¾ç¤ºä»£ç çš„ç»“æœï¼Œå¦‚æ–‡æœ¬æˆ–å›¾ç‰‡ç­‰ï¼›include=FæŒ‡ä»£ç ä¼šè¿è¡Œï¼Œä½†æ˜¯ä»£ç å’Œç»“æœéƒ½ä¸ç”Ÿæˆåˆ°è¾“å‡ºçš„æ–‡æ¡£ä¸­ã€‚echoæ§åˆ¶ä»£ç æ˜¯å¦æ˜¾ç¤ºï¼Œecho=Fè¡¨ç¤ºä»£ç æ¡†ä¸æ˜¾ç¤ºåœ¨è¾“å‡ºçš„æ–‡æ¡£ä¸­ã€‚å¦‚æœä¸€ä¸ªä»£ç å—å†…æœ‰å¤šä¸ªè¾“å‡ºç»“æœï¼Œä¼šåˆ†è§£æˆå¤šä¸ªå—è¾“å‡º;collapse=Tï¼Œå¯ä»¥å°†æ‰€æœ‰è¾“å‡ºç»“æœéƒ½é›†ä¸­åˆ°ä¸€ä¸ªå—é‡Œ, â€™hideâ€™è¡¨ç¤ºä¸æ˜¾ç¤ºç»“æœã€‚prompt=Tå¯ä»¥åœ¨ä»£ç å‰é¢åŠ ä¸€ä¸ª>ã€‚å†åŠ ä¸Šresults=â€˜holdâ€™çš„è¯å¯ä»¥å°†ä»£ç æ”¾ä¸€èµ·ï¼Œè¾“å‡ºç»“æœæ”¾ä¸€èµ·ã€‚warning=Fä½¿ä»£ç è­¦å‘Šä¿¡æ¯ä¸è¿›å…¥ç»“æœï¼Œå¯ä»¥å±è”½ä¸€äº›æ‰©å±•åŒ…çš„è½½å…¥ä¿¡æ¯ï¼›error=Fåˆ™å±è”½é”™è¯¯ä¿¡æ¯ï¼›å¦‚æœæƒ³å…¨æ–‡è®¾ç½®ï¼Œåˆ™å¯ä»¥åœ¨å¼€å¤´ç”¨knitræ¥è®¾ç½®ã€‚code-fold: trueå¯ä»¥å°†ä»£ç æŠ˜å èµ·æ¥ï¼Œåªå±•ç¤ºç»“æœ\nå›¾å½¢è¾“å‡º\nfig.show:è®¾ç½®å›¾ç‰‡çš„è¾“å‡ºæ–¹å¼\n\nfig.show=â€˜asisâ€™ï¼šè¡¨ç¤ºplotåœ¨äº§ç”Ÿä»–ä»¬çš„ä»£ç åé¢\nfig.show=â€˜holdâ€™ï¼šè¡¨ç¤ºä»£ç äº§ç”Ÿçš„å›¾ç‰‡éƒ½æ”¾åœ¨ä¸€ä¸ªå®Œæ•´çš„ä»£ç å—ä¹‹å\nfig.show=â€˜animateâ€™ï¼šè¡¨ç¤ºå°†æ‰€æœ‰ç”Ÿæˆçš„å›¾ç‰‡åˆæˆä¸€ä¸ªåŠ¨ç”»å›¾ç‰‡\nfig.show=â€˜hideâ€™ï¼šè¡¨ç¤ºäº§ç”Ÿå›¾ç‰‡ï¼Œä½†ä¸æ˜¾ç¤º\n\nfig.width: è®¾ç½®å›¾ç‰‡è¾“å‡ºå®½åº¦\nfig.heightï¼šè®¾ç½®å›¾ç‰‡è¾“å‡ºçš„é«˜åº¦\nfig.alignï¼šæ’ç‰ˆï¼Œé»˜è®¤leftï¼Œå¯ä»¥rightæˆ–center\nfig.capï¼šè®¾ç½®å›¾ç‰‡çš„æ ‡é¢˜\nfig.subcapï¼šè®¾ç½®å›¾ç‰‡çš„å‰¯æ ‡é¢˜\nout.width=â€˜50%â€™ï¼šæŒ‡è¾“å‡ºçš„å›¾ç‰‡è‡ªé€‚åº”å¤§å°ä¸º50%\nè¡¨æ ¼è¾“å‡º\n\n\nCode\n> x <- 1:10;y <- x^2;\n> lmr <- lm(y~x)\n> co <- summary(lmr)$coefficients\n> print(co)\n\n\n\n\n> knitr::kable(co,digits = 2,align = \"c\") #å¯ä»¥å°†æ•°æ®è¾“å‡ºä¸ºå•ç‹¬çš„è¡¨æ ¼å½¢å¼\n\n\n\n\n\nEstimate\nStd. Error\nt value\nPr(>|t|)\n\n\n\n\n(Intercept)\n-22\n5.55\n-3.96\n0\n\n\nx\n11\n0.89\n12.30\n0\n\n\n\n\n\n\nè¡¨æ ¼æ¸²æŸ“\nä½¿ç”¨kableExtraåŒ…,column_specå’Œrow_specæ˜¯è®¾ç½®è¡Œå’Œåˆ—ï¼Œkable_stylingè®¾ç½®è¡¨æ ¼æ ¼å¼\nfull_width: è¡¨æ ¼å®½åº¦æ˜¯å¦å¡«æ»¡HTMLï¼Œpositionï¼šå¯¹é½æ–¹å¼ï¼Œ\n\n> library(kableExtra)\n> library(knitr)\n> table_style <- knitr::kable(co,digits = 2,align = \"c\")\n> kableExtra::kable_styling(table_style,full_width = F,position = \"center\") %>% \n+   column_spec(1:2,bold = T,color='black',background = 'lightblue')\n\n\n\n \n  \n      \n    Estimate \n    Std. Error \n    t value \n    Pr(>|t|) \n  \n \n\n  \n    (Intercept) \n    -22 \n    5.55 \n    -3.96 \n    0 \n  \n  \n    x \n    11 \n    0.89 \n    12.30 \n    0 \n  \n\n\n\n\n\n\n\n\n\n\n\n\nTip With Caption\n\n\n\nè¿™æ˜¯ä¸€ä¸ªcallout"
  },
  {
    "objectID": "Ræœºå™¨å­¦ä¹ .html",
    "href": "Ræœºå™¨å­¦ä¹ .html",
    "title": "R æœºå™¨å­¦ä¹ ",
    "section": "",
    "text": "Programmingâ€¦"
  },
  {
    "objectID": "Ræ•°æ®å¯è§†åŒ–.html",
    "href": "Ræ•°æ®å¯è§†åŒ–.html",
    "title": "Ræ•°æ®å¯è§†åŒ–",
    "section": "",
    "text": "rayshaderåŒ…å¯ä»¥å°†2Då›¾åƒç»˜åˆ¶ä¸º3Dï¼ŒåŸºäºggplot2\n\n\nlibrary(rayshader)\nlibrary(ggplot2)\n\n# ç»˜åˆ¶äºŒç»´å¯†åº¦å›¾\ngg = ggplot(diamonds, aes(x, depth)) +\n     stat_density_2d(aes(fill = stat(nlevel)), #ç»˜åˆ¶å¯†åº¦ç­‰é«˜çº¿å›¾\n                  geom = \"polygon\",\n                  n = 100,bins = 10, contour = TRUE) +\n     facet_wrap(clarity~.) +    # æŒ‰clarityåˆ†ç±»\n     scale_fill_viridis_c(option = \"A\") #å°†mapé¢œè‰²è®¾ç½®ä¸ºâ€œå²©æµ†â€è‰²ï¼Œç®€ç§°ä¸ºâ€œAâ€ï¼Œå…±æœ‰â€œAâ€ï¼Œâ€œBâ€ï¼Œâ€œCâ€ï¼Œâ€œDâ€å’Œâ€œEâ€äº”ç§ï¼›\nplot_gg(gg,multicore=TRUE,width=5,height=5,scale=250) #è½¬ä¸º3Då›¾ç‰‡\nSys.sleep(0.5)\nrender_snapshot(clear=TRUE)#ä¿å­˜å›¾ç‰‡"
  },
  {
    "objectID": "nhanesR.html",
    "href": "nhanesR.html",
    "title": "nhanesR",
    "section": "",
    "text": "> library(devtools)\n> library(nhanesR)\n> devtools::install_github('yikeshu0611/nhshelp',force=TRUE)\n> nhshelp::install_nhanesR('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')\n> config_path(\"/Users/liulinhu/Desktop/NHANES/2022-08-01/NHANES\")#é…ç½®æ•°æ®åº“è·¯å¾„\n> config_years()#é…ç½®æ•°æ®åº“å¹´ä»½\n> config_items()#é…ç½®æ•°æ®åº“æ–‡ä»¶ç±»å‹\n> bu( x,'( 1, 2]')#æŒ‡(1,2], å³xå¤§äº1ï¼Œâ‰¤2\n> bu( x,'[ , ]')#æŒ‡å¤§äºç­‰äºï¼Œå°äºç­‰äº\n\nfpedæ•°æ®æ˜¯Food Patterns Equivalents Databaseï¼Œcodebookæ–‡ä»¶é‡Œæ˜¯å…¨éƒ¨å˜é‡çš„å˜é‡å’Œè§£é‡Šï¼›varLabelæ˜¯æ ‡ç­¾çš„è§£é‡Šã€‚"
  },
  {
    "objectID": "nhanesR.html#æ•°æ®è¯»å–",
    "href": "nhanesR.html#æ•°æ®è¯»å–",
    "title": "nhanesR",
    "section": "æ•°æ®è¯»å–",
    "text": "æ•°æ®è¯»å–\n\nçŸ¥é“å˜é‡åä»¥åŠæ‰€åœ¨çš„æ–‡ä»¶: ä¾‹å¦‚ageçš„å˜é‡åæ˜¯ridageyrï¼Œæ‰€åœ¨çš„æ–‡ä»¶æ˜¯demo_bï¼Œdemo_cç­‰ã€‚\nä»æ–‡ä»¶ä¸­æå–å˜é‡\n\n\n> library(nhanesR)\n> nhs_tsv('demo',years = 2015:2016)#é€‰æ‹©2015-2016å¹´çš„åŒ…å«demoçš„æ•°æ®ï¼ˆdemographicï¼‰\n> nhs_tsv(\"demo\\\\.\",'!~p',years = 1999)#1999å¹´ï¼ŒåŒ…å«\"demo.\"ä½†ä¸åŒ…å«\"p\"çš„æ•°æ®\n> \n\n\n> library(nhanesR)\n> tsv <- nhs_tsv(\"demo\")#æå–æ‰€æœ‰äººå£å­¦æ•°æ®\n> nhs_brief(tsv,\"age\") |> View() #æŸ¥æ‰¾tsvä¸­åŒ…å«ageçš„æ‰€æœ‰ï¼Œä»è€Œç¡®å®šå¹´é¾„å˜é‡åä¸ºridageyr\n> \n> x <- nhs_read(tsv,\"ridageyr:age\",\n+               \"riagendr:gender-u\",\n+               \"dmqmilit:mili\",\n+               \"dmqmiliz:mili\",\n+               codebook = T,)#:åé¢å¯ä»¥é‡å‘½åå˜é‡;codebookå‚æ•°è¡¨ç¤ºæ˜¯å¦è§£ç å˜é‡çš„å«ä¹‰;å¦‚æœå¯¹æŸä¸ªå˜é‡ä¸æƒ³è§£ç å°±åœ¨æœ€ååŠ -u;varLebelä¼šç»™å˜é‡åŠ ä¸Šè§£é‡Š(ä¸å»ºè®®æ·»åŠ ï¼Œä¼šæ”¹å˜å¯¹è±¡æ ¼å¼)\n> \n> nhs_brief(tsv,\"mili\")#æŸ¥æ‰¾å‚å†›ç›¸å…³çš„å˜é‡ï¼Œå‘ç°åœ¨åé¢çš„å¹´ä»½å‡ºç°äº†æ–°çš„å˜é‡ådmqmilitå’Œdmqmilizï¼Œå…¶å®æ˜¯ä¸€æ ·çš„,éƒ½æ”¹ä¸ºmiliå˜é‡ã€‚è¯¥å‡½æ•°è¿è¡Œå®Œåä¼šç›´æ¥å¤åˆ¶å˜é‡ååˆ°ç²˜è´´æ¿ï¼Œç›´æ¥åœ¨nhs_readä¸­ç²˜è´´å°±å¯ä»¥äº†\n\n\nå¼ºåŒ–nhs_tsv()å‡½æ•°å¯¹æ•°æ®çš„æå–\n\nåœ¨Rä¸­ï¼Œ.è¡¨ç¤ºä»»æ„ä¸€ä¸ªå­—ç¬¦ï¼Œ\\.åˆ™è¡¨ç¤ºå•çº¯çš„.è¿™ä¸ªå­—ç¬¦ã€‚|è¡¨ç¤ºâ€æˆ–è€…â€çš„é€»è¾‘å…³ç³», !~è¡¨ç¤ºä¸åŒ…å«\n\n> nhs_tsv('lab10')\n> nhs_tsv(\"lab10\\\\.\")#åªæå–lab10.è¿™ä¸ªæ–‡ä»¶\n> \n> nhs_tsv(\"lab13am|l13am|trigly\")#æå–è¿™ä¸‰ä¸ªæ–‡ä»¶\n> nhs_tsv(\"lab13am|l13am|trigly\",\"!~l13am_b|l13am_c\")#æå–ä¸‰ä¸ªæ–‡ä»¶ï¼Œä½†ä¸åŒ…å«l13am_bå’Œl13am_c\n\n\nå®éªŒå®¤æ£€æŸ¥æ•°æ®çš„è¯»å–\nå…ˆå»ç½‘ç«™ä¸Šæ£€ç´¢ï¼Œå¦‚hemoglobinï¼Œç„¶åç¡®å®šæ–‡ä»¶å. nhs_readæ”¯æŒè¿ç»­æ·»åŠ æ•°æ®ï¼Œåªéœ€è¦å…ˆè¾“å…¥æ–‡ä»¶åå†è¾“å…¥å˜é‡ï¼Œå¦‚(cbc, â€œlbxhgbâ€™, demo,â€ riagendrâ€), å¦‚æœä¸æŒ‡å®šå˜é‡ï¼Œä¼šæŠŠcbcä¸­æ‰€æœ‰çš„å˜é‡å…¨éƒ¨æå–è¿›å»\n\n> library(nhanesR)\n> demo <- nhs_tsv(\"demo\")#æå–æ‰€æœ‰äººå£å­¦æ•°æ®\n> \n> cbc <- nhs_tsv(\"lab25|l25|cbc\")#è¡€çº¢è›‹ç™½æœ‰ä¸‰ä¸ªä¸åŒçš„æ–‡ä»¶åï¼Œå…¨éƒ¨æå–\n> bmx <- nhs_tsv(\"bmx\")#æå–bmiå’Œè…°å›´æ‰€åœ¨çš„æ–‡ä»¶\n> \n> x <- nhs_read(demo,\"ridageyr:age\",\"riagendr:gender\",\"dmqmilit:mili\",\"dmqmiliz:mili\",\n+               cbc,\"lbxhgb:Hbg\",\n+               bmx,\"bmxbmi:BMI\",\"bmxwaist:Waist\",\n+               codebook = T)#ç›´æ¥å°†è¡€çº¢è›‹ç™½å’ŒBMIå’Œè…°å›´çš„æ•°æ®æ·»åŠ åˆ°ä¹‹å‰äººå£å­¦æ•°æ®ä¹‹å\n> nit1 <- head(x)"
  },
  {
    "objectID": "nhanesR.html#æƒé‡",
    "href": "nhanesR.html#æƒé‡",
    "title": "nhanesR",
    "section": "æƒé‡",
    "text": "æƒé‡\n1.æ‰¾åˆ°åˆç†çš„æƒé‡ã€‚2.è®¡ç®—åˆå¹¶æƒé‡ï¼›æƒé‡ä¸éœ€è¦è®¡ç®—ï¼Œnhaneså·²ç»è®¡ç®—å¥½äº†ï¼Œåªéœ€è¦è®¡ç®—åˆå¹¶æƒé‡ã€‚\nNHANESä¸­æä¾›äº†å„ç§å„æ ·çš„æƒé‡ï¼Œå¦‚interviewæƒé‡(wtint2yr), mecæµ‹è¯•æƒé‡(wtmec2yr)å’Œä¸€äº›äºšç»„çš„æƒé‡ã€‚ä¸€ä¸ªå¥½çš„ç»éªŒæ³•åˆ™æ˜¯ä½¿ç”¨â€æœ€å°å…¬åˆ†æ¯â€ï¼Œå…¶ä¸­é’ˆå¯¹æœ€å°‘æ•°é‡çš„è®¿è°ˆè€…æ”¶é›†çš„æ„Ÿå…´è¶£å˜é‡æ˜¯â€æœ€å°å…¬åˆ†æ¯â€ã€‚é€‚ç”¨äºè¯¥å˜é‡çš„æ ·æœ¬æƒé‡æ˜¯ç”¨äºè¯¥ç‰¹å®šåˆ†æçš„é€‚å½“æƒé‡ã€‚æ‰€æœ‰è®¿è°ˆå’Œmecæµ‹è¯•æƒé‡éƒ½å¯ä»¥åœ¨ç›¸åº”è°ƒæŸ¥å‘¨æœŸçš„äººå£ç»Ÿè®¡æ–‡ä»¶ä¸­æ‰¾åˆ°ã€‚æ³¨æ„ï¼šæœ‰äº›é—®å·ç»„ä»¶æ˜¯åœ¨mecä¼šè¯æœŸé—´è€Œéå®¶åº­è®¿è°ˆæœŸé—´ç®¡ç†çš„ï¼Œå› æ­¤å¿…é¡»å¯¹è¿™äº›ç»„ä»¶ä½¿ç”¨mecæµ‹è¯•æƒé‡\n\nå¦‚ä½•è®¡ç®—åˆå¹¶æƒé‡\nwtint2yræŒ‡ä¸¤å¹´çš„ï¼ˆä¸€ä¸ªyear circleï¼‰æƒé‡ï¼Œé€‰æ‹©äº†å‡ ä¸ªyear circleå°±ä¹˜ä»¥å‡ åˆ†ä¹‹1ã€‚åŠåˆå¹¶æƒé‡=å¯¹åº”æƒé‡*1/nã€‚ä½†å½“åŒæ—¶æ¶‰åŠåˆ°1999-2000å’Œ2001-2002æ—¶éœ€è¦ç”¨4å¹´æƒé‡wtint4yrï¼Œåˆ†å¼€ä½¿ç”¨åªéœ€è¦2å¹´æƒé‡ã€‚å¦‚æœæ¶‰åŠ1999-2002å’Œå…¶ä»–year circleï¼Œå¦‚2003-2004ï¼Œæ­¤æ—¶6å¹´çš„æƒé‡wt6yr=2/3Ã—wt4yrï¼Œå’Œ1/3Ã—wt2yrã€‚å¦‚æœæ˜¯8å¹´æƒé‡wt8yr=2/4Ã—wt4yrå’Œ1/4Ã—wt2yrï¼Œå¦‚æ­¤ç±»æ¨\n\n\nç¤ºä¾‹å®æ“\n\nç¤ºä¾‹1\nnhanes2013-2016ï¼Œç§æ—è¥¿ç­ç‰™è£”è¡€ç»Ÿä»¥åŠè´«å›°ä¸20å²åŠä»¥ä¸Šæˆå¹´äººå…ˆå‰è¯Šæ–­ä¸ºç³–å°¿ç—…çš„å…³è”ã€‚æ‰€æœ‰çš„å˜é‡éƒ½æ˜¯åœ¨å®¶åº­è®¿è°ˆä¸­æ”¶é›†çš„ã€‚ä½¿ç”¨è®¿è°ˆæƒé‡è¿›è¡Œåˆ†æwtint4yr,æŸ¥è¯¢åˆ°ç§æ—çš„å˜é‡åä¸ºridreth1ï¼Œè´«å›°povertyçš„å˜é‡åä¸ºindfmpirï¼Œå¹´é¾„å˜é‡åä¸ºridageyrï¼›ç³–å°¿ç—…çš„è¯Šæ–­åœ¨Questionnaireé‡Œçš„diq010å˜é‡ã€‚æƒé‡æå–wtint2yr\n\n\n\næƒé‡æ€»ç»“\n\nå®¶åº­é‡‡è®¿æƒé‡interviewï¼ˆèŒƒå›´æœ€å¤§ï¼‰ï¼›wtint2yr/wtint4yr\nè½¦é‡Œçš„æƒé‡MECï¼ˆmobile examination carï¼‰ï¼ˆèŒƒå›´è¾ƒintå°ï¼‰ï¼›wtmec2yr/wtmec4yr\nå…¶ä»–æƒé‡ï¼ˆèŒƒå›´æœ€å°ï¼‰ï¼›wtsaf2yrç­‰ï¼ŒèŒƒå›´æœ€å°\né€‰æ‹©æƒé‡åº”è¯¥é€‰æ‹©æœ€å°æƒé‡ï¼Œå³ä¸åŒæƒé‡çš„äº¤é›†ï¼ˆå³æœ‰ç‰¹æ®Šæƒé‡å°±é€‰ç‰¹æ®Šæƒé‡ï¼Œæ²¡æœ‰å°±é€‰mecæˆ–int\nåˆå¹¶æƒé‡çš„è®¡ç®—ï¼šyear circleä¸ºnï¼Œåˆå¹¶æƒé‡ä¸º1/n*2yr; å¦‚æœåŒæ—¶å‡ºç°1999-2000å’Œ2001-2002ï¼Œè¿™ä¸¤ä¸ªcircleçš„åˆå¹¶æƒé‡ä¸º2/nÃ—4yrï¼Œå…¶ä½™çš„circleè¿˜æ˜¯1/nÃ—2yr"
  },
  {
    "objectID": "nhanesR.html#æ•°æ®çš„æ¸…æ´—",
    "href": "nhanesR.html#æ•°æ®çš„æ¸…æ´—",
    "title": "nhanesR",
    "section": "æ•°æ®çš„æ¸…æ´—",
    "text": "æ•°æ®çš„æ¸…æ´—\n\nå¦‚ä½•å¿«é€Ÿè¾“å…¥Factor\nåŸºäºnhanesRåŒ…é‡Œçš„Factorå‡½æ•°ï¼Œå¯ä»¥ç›´æ¥ç”ŸæˆfactoråŒ–çš„ä»£ç \n\n\n> c <- c(\"white\",\"black\",\"red\",\"purple\")\n> Factor(c)#è¿è¡Œè¿™è¡Œä¾¿ä¼šè‡ªåŠ¨ç”Ÿæˆä¸‹ä¸€è¡Œçš„å› å­åŒ–çš„ä»£ç \n> c <- factor(c, levels = c(\"white\",\"black\",\"red\",\"purple\"))\n\n\nå¦‚ä½•ä¿®æ”¹å˜é‡åï¼ˆRecodeï¼‰\n\n\n> c <- c(\"white\",\"black\",\"red\",\"purple\")\n> # Recode(c)#è¿è¡Œè¿™è¡Œä¾¿ä¼šç”Ÿæˆä¸‹é¢çš„ä»£ç ï¼Œç”¨äºå°†åŸæœ‰çš„å˜é‡æ”¹å\n> d$eth.new <- Recode(d$eth,\n+   \"Non-Hispanic White::\", \n+   \"Non-Hispanic Black::\", \n+   \"Other Race - Including Multi-Racial::\", \n+   \"Mexican American::\", \n+   \"Other Hispanic::\",\n+   to.numeric = FALSE)\n> c.new <- Recode(c,\n+   \"white::\", \n+   \"black::\", \n+   \"red::\", \n+   \"purple::\",\n+   to.numeric = FALSE)\n\n\nNHSIIIçš„æ•°æ®å¦‚ä½•è®¡ç®—åˆå¹¶æƒé‡ NHSIIIæ˜¯1999å¹´ä»¥å‰çš„æ•°æ®ï¼Œæ˜¯ä»¥3å¹´ä¸ºä¸€ä¸ªå‘¨æœŸã€‚è®¡ç®—æƒé‡æ—¶éœ€è¦ä»¥å¹´æ¥ï¼Œè€Œä¸æ˜¯year circleã€‚ä¾‹å¦‚1994-1996ï¼Œ2001-2002ï¼Œ2009-2010ï¼Œæ­¤æ—¶æ€»å…±3+2+2=7å¹´ï¼Œæ‰€ä»¥1994-1996çš„æƒé‡æ˜¯3/7Ã—wt3yrï¼Œå…¶ä½™çš„æ˜¯2/7Ã—wt2yrã€‚ä½†æ˜¯å¦‚ä½•åŒæ—¶æ¶‰åŠåˆ°1999å’Œ2001æ—¶ï¼Œè¿™ä¸¤ä¸ªyear circleè¦åˆå¹¶ç®—ä½œ4å¹´ï¼Œç”¨wt4yræ¥è®¡ç®—ã€‚\né€‰æ‹©è¡Œå’Œåˆ—\nå¯ä»¥ç”¨nhanesRé‡Œçš„select_rowå‡½æ•°æ¥é€‰æ‹©è¡Œ,drop_rowæ¥åˆ é™¤è¡Œ\n\n\n> d0 <- db_demo(years = 1999:2003,ageyr = \"age\",sex = T,eth1 = T,Year = T,poverty = T)#ç›´æ¥æå–1999-2003çš„æ‰€æœ‰äººå£å­¦æ•°æ®ï¼ŒæŒ‡å®šéœ€è¦å‡ºç°çš„åˆ—\n> d1 <- select_row(x,x$Year==\"1999-2000\" & x$age >= 50)#é€‰æ‹©xä¸­å¹´ä»½ä¸º1999-2000ï¼Œå¹´é¾„å¤§äºç­‰äº50å²çš„æ•°æ®è¡Œ\n> d1 <- select_row(x,x$Year %in% c(\"1999-2000\",\"2001-2002\"))#åŒæ—¶è®¾ç½®å¤šä¸ªç­›é€‰æ¡ä»¶\n> d2 <- drop_row(x,x$Year==\"2001-2002\")#å»é™¤xä¸­å¹´ä»½ä¸º2001-2002çš„æ•°æ®\n> d3 <- drop_row(d0,is.na(d0$poverty))#ç”¨drop_rowä¹Ÿå¯ä»¥å»é™¤ç¼ºå¤±å€¼\n\n\næ•°æ®çš„åˆå¹¶\nç¬¬ä¸€ç§æ–¹æ³•æ˜¯ç›´æ¥ç”¨ç®¡é“æ“ä½œç¬¦æ·»åŠ æ•°æ®\n\n> d1 <- db_demo(years = c(1999:2003,2007),Year = T,\n+               sex = T,ageyr = \"age\") |> \n+   db_cbc(wbc_1000cells.ul = \"wbc\") |> \n+   dex_phenoAge()\n> #cbcæ˜¯å…¨è¡€ç»†èƒæ•°æ®ï¼ŒphenoAgeæ˜¯ç”Ÿç‰©å­¦å¹´é¾„ï¼Œç›´æ¥ç”¨ç®¡é“æ“ä½œç¬¦å³å¯ä¸æ–­æ·»åŠ æ•°æ®\n> head(d1)\n\n\nç¬¬äºŒç§æ–¹æ³•æ˜¯å…ˆåˆ†åˆ«æå–æ•°æ®ï¼Œç„¶åå†åˆå¹¶.æ­¤æ—¶å¯ä»¥left_join,righ_join,inner_join,full_join\n\n> d1 <- db_demo(years = c(1999:2003,2007),Year = T,\n+               sex = T,ageyr = \"age\")\n> d2 <- db_cbc(years = c(1999:2003,2007),wbc_1000cells.ul = \"wbc\")\n> d3 <- dex_phenoAge()\n> d4 <- Left_Join(d1,d2,d3)#left_joinåªåŒ¹é…d1çš„åºå·,å¯ä»¥çœ‹åˆ°d4å’Œd1å…·æœ‰åŒæ ·çš„è¡Œæ•°\n> d5 <- Right_Join(d1,d2,d3)#å…ˆä¸d2åˆå¹¶ï¼Œå†ä¸d3åˆå¹¶ï¼Œæœ€ç»ˆæ•°æ®ä»¥d3ä¸ºå‡†\n> d6 <- Inner_Join(d1,d2,d3)#ä»¥ä¸‰è€…å…±æœ‰çš„æ•°æ®ä¸ºå‡†è¿›è¡Œåˆå¹¶\n> d7 <- Full_Join(d1,d2,d3)#æ‰€æœ‰çš„æ•°æ®ä¸€èµ·åˆå¹¶\n> \n> d8 <- Left_Join(d2,d1) #ä¼šæ˜¾ç¤ºd1äººå£å­¦æ•°æ®ä¸­æœ‰4028äººæ²¡æœ‰ç™½ç»†èƒè®¡æ•°çš„æ•°æ®ï¼Œä¾¿äºç”»æµç¨‹å›¾\n> # d2   :37247 ; d1:41275(-4028) \n> d8 <- Left_Join(d2,d1,inspect = c(\"age\",\"sex\")) #å¯ä»¥æŸ¥çœ‹æŸä¸ªå˜é‡åœ¨d1åˆå¹¶åˆ°d2å‰åçš„å˜åŒ–ï¼Œç»¿è‰²è¡¨ç¤ºå‡å°‘ï¼Œçº¢è‰²è¡¨ç¤ºå¢å¤š\n> #å…¶ä»–ç±»å‹çš„joinä¹Ÿå¯ä»¥inspect\n\n\n\n\næ·»åŠ æ–°åˆ—\n1.æ·»åŠ æ–°åˆ—çš„ä¸»è¦ä½œç”¨ä¸ºå¯¹åŸå§‹æ•°æ®çš„æŸäº›å€¼è¿›è¡Œåˆ¤æ–­ï¼Œå¢åŠ ä¸€äº›æ–°çš„å˜é‡ï¼Œä¾‹å¦‚æ˜¯å¦æ˜¯è€å¹´ï¼ŒæŸäº›æŒ‡æ ‡æ˜¯å¦å‡é«˜ç­‰ã€‚\n\n> d <- db_demo(years = 1999,ageyr = \"age\",sex = T,Year = T) |> \n+   db_cbc(wbc_1000cells.ul = \"wbc\")\n> d <- drop_row(d,is.na(d$wbc))#å»é™¤ç™½ç»†èƒè®¡æ•°çš„ç¼ºå¤±å€¼\n> ####ä»¥10ä¸ºç•Œå€¼ï¼Œåˆ¤æ–­ç™½ç»†èƒæ•°æ˜¯å¦å‡é«˜####\n> d <- add_col(d,colname = \"wbc_level\",value = \"yes\",condition = d$wbc > 10) |> \n+   add_col(colname = \"wbc_level\",value = \"no\",condition = d$wbc <= 10)#æ–°å¢ä¸€åˆ—ï¼Œåˆ—åä¸ºwbc_levelï¼Œç™½ç»†èƒå¤§äº10çš„æ—¶å€™ä¸ºyesï¼Œå°äºç­‰äº10çš„æ—¶å€™ä¸ºno\n> \n> ####å¯¹äºç™½ç»†èƒï¼Œç”·æ€§çš„ç•Œé™ä¸º10ï¼Œå¥³æ€§çš„ç•Œé™æ˜¯9####\n> ck <- (d$sex == \"Male\" & d$wbc > 10) | (d$sex == \"Female\" & d$wbc >10)\n> \n> d1 <- add_col(d,colname = \"wbc_level\",value = \"yes\",condition = ck) |> \n+   add_col(colname = \"wbc_level\",value = \"no\",condition = is.na(d1$wbc_level),\n+           position = 2)\n> #å…ˆæŠŠç”·æ€§å’Œå¥³æ€§çš„yesæŒ‡å®šäº†ï¼Œç„¶åå‰©ä¸‹çš„NAå…¨éƒ¨æ˜¯noã€‚positionå¯ä»¥æŒ‡å®šæ–°å¢çš„åˆ—çš„ä½ç½®\n\n2.ä¹Ÿå¯ä»¥ç”¨äºä¸€äº›ç–¾ç—…çš„è¯Šæ–­çš„æ·»åŠ ï¼Œä¾‹å¦‚ç¡çœ å‘¼å¸æš‚åœç»¼åˆå¾ğŸ‘‡\n\n> d <- db_slq(years = 2005,\n+             sleep_disorder_sleep_apnea = \"apnea\",\n+             how_often_do_you_snort_or_stop_breathing = \"stop_breathing\",\n+             how_often_feel_overly_sleepy_during_day = \"sleepy\")#æå–ç¡çœ å‘¼å¸æš‚åœç›¸å…³çš„æ•°æ®\n> #å°†åŸæ¥çš„å˜é‡å€¼è¿›è¡Œé‡ç¼–ç ğŸ‘‡\n> # Recode(d$apnea) \n> d$apnea <- Recode(d$apnea,\n+   \"sleep apnea::yes\", \n+   \"NA::\",\n+   to.numeric = FALSE)\n> # Recode(d$stop_breathing)\n> d$stop_breathing <- Recode(d$stop_breathing,\n+   \"never::no\", \n+   \"frequently (5 or more nights/week)::yes\", \n+   \"rarely (1-2 nights/week)::no\", \n+   \"occasionally (3-4 nights/week)::yes\", \n+   \"NA::\",\n+   to.numeric = FALSE)\n> # Recode(d$sleepy)\n> d$sleepy <- Recode(d$sleepy,\n+   \"rarely (1 time a month)::no\", \n+   \"never::no\", \n+   \"almost always (16-30 times a month)::yes\", \n+   \"sometimes (2-4 times a month)::yes\", \n+   \"often (5-15 times a month)::yes\", \n+   \"NA::\",\n+   to.numeric = FALSE)\n> d$osas <- paste0(d$apnea,\"~\",d$stop_breathing,\"~\",d$sleepy)#å°†ä¸‰ä¸ªæŒ‡æ ‡åˆå¹¶åœ¨ä¸€èµ·\n> # Recode(d$osas) #å¼€å§‹ç­›é€‰è¯Šæ–­æ ‡å‡†ï¼Œä¸‰ä¸ªä¸­ä»»æ„ä¸€ä¸ªä¸ºyeså°±å¯ä»¥è¯Šæ–­ä¸ºOSAS\n> d$osas <- Recode(d$osas,\n+   \"NA~no~no::no\", \n+   \"NA~no~yes::yes\", \n+   \"yes~no~no::yes\", \n+   \"yes~NA~yes::yes\", \n+   \"NA~yes~no::yes\", \n+   \"NA~NA~yes::yes\", \n+   \"yes~yes~yes::yes\", \n+   \"NA~yes~yes::yes\", \n+   \"NA~NA~no::no\", \n+   \"NA~no~NA::no\", \n+   \"yes~no~yes::yes\", \n+   \"yes~yes~no::yes\", \n+   \"NA~NA~NA::NA\", \n+   \"yes~NA~no::yes\",\n+   to.numeric = FALSE)\n\n3.ä¹Ÿå¯ä»¥ç”¨äºæŸç§æ¡ä»¶ä¸‹è¿›è¡Œåˆ†ç»„. quantå¯ä»¥æ‰§è¡Œåˆ†ä½æ•°çš„è®¡ç®—\n\n> d <- db_demo(years = 1999,sex = \"sex\",ageyr = \"age\",psu_strat = F) |> \n+   db_cbc(wbc_1000cells.ul = \"wbc\")\n> d <- drop_row(d,is.na(d$wbc))\n> #æ ¹æ®ç™½ç»†èƒçš„å‡å€¼åˆ†ä¸º2ç»„\n> d <- add_col(d,\"wbc2\",\"high\",d$wbc > mean(d$wbc)) |> \n+   add_col(\"wbc2\",\"low\",d$wbc <= mean(d$wbc))\n> \n> #å°†ç™½ç»†èƒæŒ‰ç…§å››åˆ†ä½æ•°åˆ†æˆ4ç»„ï¼Œå¹¶ä¸”ç¼–ç ä¸ºQ1ï¼ŒQ2ï¼ŒQ3ï¼ŒQ4\n> # quant(d$wbc)\n> d$wbcQ <- quant(d$wbc, n = 4,Q = TRUE,round=3)#n=4å³è¿›è¡Œå››åˆ†ä½æ•°è®¡ç®—\n> d$wbcQ.median <- quant.median(d$wbc, n = 4,round=3)#è®¡ç®—æ¯ä¸ªå››åˆ†ä½é—´è·çš„ä¸­ä½æ•°"
  },
  {
    "objectID": "nhanesR.html#æ•°æ®æå–æ±‡æ€»",
    "href": "nhanesR.html#æ•°æ®æå–æ±‡æ€»",
    "title": "nhanesR",
    "section": "æ•°æ®æå–æ±‡æ€»",
    "text": "æ•°æ®æå–æ±‡æ€»\næå–çš„æ•°æ®å¯ä»¥è¿›è¡Œå åŠ ï¼Œä¾‹å¦‚db_demo() |> db_drtot()å¯ä»¥ä¸æ–­å¢åŠ ä¸åŒç±»å‹çš„æ•°æ®\n\næå–äººå£å­¦æ•°æ®\nä½¿ç”¨db_demo(),éœ€è¦çš„åˆ—å°±æŒ‡å®šä¸ºTRUE\n\n\næå–é¥®é£Ÿæ•°æ®\nä½¿ç”¨db_drtot(), day= å¯ä»¥æŒ‡å®šæ˜¯ä¸€å¤©çš„é¥®é£Ÿæ•°æ®è¿˜æ˜¯ä¸¤å¤©çš„é¥®é£Ÿæ•°æ®ï¼Œé»˜è®¤æ˜¯2å¤©çš„æ•°æ®ã€‚fun= å¯ä»¥è®¡ç®—meanã€sumã€aloneï¼ˆ2å¤©çš„éƒ½åˆ†å¼€æ˜¾ç¤ºï¼‰ï¼Œé»˜è®¤æ˜¯sumã€‚both2daysè¡¨ç¤ºæ˜¯å¦åªè¦2å¤©éƒ½æœ‰çš„æ•°æ®ï¼Œé»˜è®¤ä¸ºTRUE\n\n> x <- db_drtot(years = 2005,calcium_mg = T,Year = T,fun = \"alone\")\n> head(x)#aloneæ˜¾ç¤º2å¤©çš„æ•°æ®\n\n\nå¦‚æœboth2daysä¸ºFALSEï¼Œåˆ™ä»…1å¤©æœ‰æ•°æ®çš„è¡Œä¹Ÿä¼šæ˜¾ç¤º\n\n> x <- db_drtot(years = 2005,calcium_mg = T,Year = T,both2days = F,fun = \"alone\")\n> head(x)\n\n\n\n\næå–ç”Ÿå­˜æ•°æ®\ndb_mort()ç”¨äºæå–ç”Ÿå­˜æ•°æ®ï¼Œç”Ÿå­˜æ•°æ®ä¸»è¦åŒ…æ‹¬7åˆ—ã€‚\n\n> mort <- db_demo(years = 2005,ageyr = \"age\",sex = \"sex\",psu_strat = F) |> \n+   db_mort(years = 2005) #å…ˆäººå£å­¦æ•°æ®ï¼Œç„¶åæ·»åŠ ä¸Šç”Ÿå­˜æ•°æ®\n\n\n\næå–é¥®é…’ç›¸å…³æ•°æ®\n1.æå–g/day\n\n> db_drtot(years=2005,alcohol_g = \"alcohol\",day = c(1,2),fun = \"mean\", both2days = F)\n\n2.æå–drink/dayçš„æ•°æ®.æ³¨æ„ä¸æ˜¯cup/day\n\n> d <- db_fped(a_drinks = T,years = 2005)\n> d1 <- db_Alcohol.drinks(years = 2005)#è¿™ä¸ªæ˜¯æœ€å‡†ç¡®çš„ï¼Œdrinks/day\n\n3.é…’ç²¾ä½¿ç”¨ç¨‹åº¦åˆ†ç±»\n\ncurrent heavey alcohol use\nâ‰¥3 drinks perday for female\nâ‰¥4 for male\nbinge drinking on 5 or more days per month\ncurrent moderate alcohol use\nâ‰¥2 drinks per day for female\nâ‰¥3 for male\nbinge drinking â‰¥ 2days per month\ncurrent mild alcohol use\nnot meet the above\n\n\n> t <- diag_alcohol.user(years = 2005,binge = T,Year = T)#å¯ä»¥ä¿®æ”¹mild,moderateï¼Œheaveyçš„åˆ¤æ–­æ ‡å‡†ï¼Œå¯ä»¥è®¾å®šæ˜¯å¦æœ‰bingeè¿™ä¸ªç¨‹åº¦\n\n\n\né»„é…®ç±»åŒ–åˆç‰©æ•°æ®æå–\né»„é…®ç±»åŒ–åˆç‰©æ•°æ®åº“Flavonoidã€‚ä¹‹å‰åªæœ‰2007-2010çš„æ•°æ®ï¼Œ2022å¹´å¤å¤©å‡ºäº†2017-2018çš„æ•°æ®ã€‚åŒ…å«6ç§é»„é…®ç±»çš„29ç§åŒ–åˆç‰©çš„é¥®é£Ÿæ‘„å…¥æ•°æ®ã€‚dayè¡¨ç¤ºæå–1å¤©è¿˜æ˜¯ä¸¤å¤©çš„æ•°æ®ï¼Œè¦ä¹ˆç¬¬ä¸€å¤©ï¼Œè¦ä¹ˆä¸¤å¤©åŒæ—¶ä½¿ç”¨ï¼›å½“ä½¿ç”¨ä¸¤å¤©æ—¶ï¼Œfunå¯ä»¥æŒ‡å®šè®¡ç®—å‡å€¼ï¼ˆmeanï¼‰è¿˜æ˜¯å’Œï¼ˆsumï¼‰ï¼›\n\n> fl <- db_flavonoids(Daidzein_mg = \"Daidzein\")\n\n\n\né‡é‡‘å±æ•°æ®æå–\nä»pbcdæ•°æ®ä¸­æå–é‡é‡‘å±ç›¸å…³çš„æ•°æ®ï¼Œä½¿ç”¨db_PbCd()æå–ï¼Œæ•°æ®ä»2005å¹´å¼€å§‹ï¼Œå¦‚é“¬ã€æ±ã€é”°ç­‰é‡é‡‘å±ã€‚æ³¨æ„ï¼šå½“ä½¿ç”¨PbCdæ•°æ®æ—¶ï¼Œ2013-2014å’Œ2015-2016ä¸¤å¹´ï¼Œéœ€è¦ä½¿ç”¨wtsh2yræƒé‡ï¼Œå› ä¸ºè¿™ä¸¤å¹´12å²ä»¥ä¸Šçš„å‚ä¸è€…åªæœ‰1/2çš„æ ·æœ¬è¿›è¡Œäº†æ£€æµ‹ï¼Œæ‰€ä»¥æœ‰ä¸€ä¸ªå•ç‹¬çš„wtsh2yrï¼Œè€Œ1-11å²çš„wtsh2yrç­‰åŒäºMECæƒé‡ã€‚æ‰€ä»¥æ¶‰åŠè¿™ä¸¤ä¸ªyear circleæ—¶ä½¿ç”¨ç‰¹æ®Šæƒé‡wtsh2yrï¼Œå…¶ä½™çš„circleä½¿ç”¨MECæƒé‡ã€‚dp_PbCd()ä¸­æä¾›äº†æƒé‡weight = Tå³å¯è‡ªåŠ¨æä¾›æƒé‡(ä»…åŸå§‹æƒé‡ï¼Œåˆå¹¶æƒé‡æŒ‰åŸæ–¹æ³•è®¡ç®—ï¼‰\n\n> x <- db_PbCd(years = 2013,blood_cadmium_ug.l = T,weight = T) |> \n+   drop_row(is.na(x$blood_cadmium_ug.l))\n\n\n\nè¯ç‰©æœç´¢ä¸æå–\nå…ˆæ£€ç´¢ï¼Œçœ‹æ˜¯ä¸æ˜¯è‡ªå·±æƒ³è¦çš„è¯ç‰©ï¼Œå†Drug()å»æå–ã€‚remove.otherå¦‚æœæ˜¯Fï¼Œåˆ™å¦‚æœä¸€ä¸ªäººæ—¢åƒäº†æ£€ç´¢çš„è¯ç‰©ï¼Œåˆåƒäº†å…¶ä»–è¯ï¼Œå°±ä¼šå å¤šè¡Œã€‚å¦‚æœ=Tï¼Œåˆ™ä¼šå€¼ä¿ç•™æ£€ç´¢çš„è¯ç‰©ï¼ˆä»…åˆ é™¤åŒæ—¶å‡ºç°çš„æƒ…å†µï¼‰ã€‚\n\n> browse_rxq_Drug()\n> browse_rxq_Rx()#å¤„æ–¹æ–‡ä»¶\n> drug_search(\"antibiotic\",years = 2015)#æ£€ç´¢åŒ…å«å…³é”®è¯antibioticçš„è¯ç‰©\n> d <- Drug(\"antibiotic\",years = 2015,drugname = T,remove.other = T)#æå–å…³é”®è¯çš„è¯ç‰©\n> \n> x <- drug_anti.infectives(years = 2015,drugname = T,dcn = T)#æå–æŠ—æ„ŸæŸ“è¯ç‰©"
  },
  {
    "objectID": "nhanesR.html#æŒ‡æ ‡è®¡ç®—æ±‡æ€»",
    "href": "nhanesR.html#æŒ‡æ ‡è®¡ç®—æ±‡æ€»",
    "title": "nhanesR",
    "section": "æŒ‡æ ‡è®¡ç®—æ±‡æ€»",
    "text": "æŒ‡æ ‡è®¡ç®—æ±‡æ€»\n\nå¥åº·é¥®é£ŸæŒ‡æ•°ï¼ˆHealthy eating indexï¼‰\nå¥åº·é¥®é£ŸæŒ‡æ•°çš„ä»‹ç»ã€‚HEIæœ‰ä¸¤ä¸ªç‰ˆæœ¬2015å’Œ2010ï¼Œ2015æ˜¯æœ€æ–°çš„ç‰ˆæœ¬ï¼Œä»¥ç¬¦åˆ2015-2020ç¾å›½äººè†³é£ŸæŒ‡å—ã€‚ç®—æ³•åŒ…æ‹¬ç®€å•ç®—æ³•å’Œpopulation ratio methodï¼Œç®€å•ç®—æ³•åˆåŒ…æ‹¬Per dayå’ŒPer personï¼Œper dayå°±æ˜¯åœ¨day = 1ï¼ŒPer personå°±æ˜¯day=c(1,2), å¯¹åº”method = â€œssumâ€å’Œâ€partioâ€.é»˜è®¤ä¼šç»™æ‰€æœ‰æˆåˆ†çš„è¯„åˆ†ï¼Œå¦‚æœcomponent = Få°±åªç»™total score\n\n> x <- dex_HEI(years = 2011,version = 2015,method = \"ssum\",day = 1,dietary = \"tot\")\n\n\n\nå’–å•¡æ•°æ®æå–\ndb_coffee(). å’–å•¡æ•°æ®æœ€å¥½æ˜¯åœ¨1999å¹´ä»¥åè¿›è¡Œã€‚åŒ…å«äº†æ˜¯å¦æ·»åŠ å’–å•¡å› ï¼Œæ˜¯å¦åŠ ç³–ï¼Œæ˜¯å¦åŠ è„‚ï¼ŒåŠ å¥¶ç­‰ï¼Œä»¥åŠå’–å•¡çš„ç§ç±»ï¼Œå¦‚å¡å¸ƒå¥‡è¯ºã€æ‘©å¡ã€ç›å¥‡æœµç­‰ç­‰ã€‚ å¦‚ä½•ç¡®å®šå¹¶è¯†åˆ«å’–å•¡æ•°æ®ï¼Ÿâ€“ä½¿ç”¨çš„æ˜¯FNDDsæ•°æ®é‡Œçš„é£Ÿç‰©ç¼–ç 921å¼€å¤´çš„æ˜¯coffeeï¼ˆç”¨äºå†™æ–‡ç« è¯´æ˜æ•°æ®æ¥æºï¼‰ å’–å•¡æ‘„å…¥çš„å…‹æ•°è½¬åŒ–ä¸ºæ¯æ•°ï¼Ÿâ€“ä»¥6ç›å¸ä¸ºä¸€æ¯\n\n> co <- db_coffee(years = 2003,\n+                 day = c(1,2), #è¦ä¹ˆæå–ç¬¬ä¸€å¤©ï¼Œè¦ä¹ˆæå–ä¸¤å¤©çš„\n+                 fun = \"mean\", #é»˜è®¤å–ä¸¤å¤©çš„å‡å€¼\n+                 unit = \"g\") #gæˆ–è€…cupå•ä½ï¼Œé»˜è®¤æ˜¯g\n\n\n\né¥®é£Ÿç‚ç—‡æŒ‡æ•°çš„æå–\n\n> di <- dex_DII(years = 2005)\n\n\n\nè‚¾å°çƒæ»¤è¿‡ç‡eGFR\ndex_eGFR()é‡Œæä¾›äº†10ç§è®¡ç®—eGFRçš„æ–¹æ³•ï¼Œå¦‚Cockcroft_Gault,CKD_EPI_Scr,Schwartzç­‰ç­‰ï¼Œå¯ä»¥åœ¨mothod=é‡Œé™å®šï¼Œé»˜è®¤æ˜¯CKD_EPI_Scrã€‚å¦‚æœéœ€è¦è®¡ç®—å¤šç§æ–¹æ³•çš„eGFRï¼Œåªéœ€è¦method = c(,)ã€‚ç†è®ºä¸Šæ¥è¯´æ¨èä½¿ç”¨è¡€è‚Œé…è®¡ç®—æ»¤è¿‡ç‡ï¼Œæ–¹æ³•æœ€æ¨èMDRDå’ŒCGæ–¹æ³•\n\n> egf <- dex_eGFR(years = 2005,method = c(\"CKD_EPI_Scr\",\"BIS1_Scr\"))\n\n\n\nç›Šç”Ÿå…ƒã€ç›Šç”ŸèŒã€åˆç”Ÿå…ƒ\nç›¸å…³å‚è€ƒæ–‡çŒ®ã€‚FDAä¸ç›‘ç®¡ç›Šç”ŸèŒï¼Œä½†æ˜¯ç›‘ç®¡ç›Šç”Ÿå…ƒï¼ˆå¦‚ä¹³æœç³–ï¼‰ï¼Œæ‰€ä»¥å¦‚æœåªç ”ç©¶ç›Šç”ŸèŒï¼Œåªéœ€è¦æ£€ç´¢è†³é£Ÿè¡¥å……å‰‚çš„æ•°æ®ï¼Œè€Œç›Šç”Ÿå…ƒçš„è¯éœ€è¦æ£€ç´¢è¯å“ï¼Œé€šè¿‡å…³é”®è¯æ¥åŒ¹é…æ˜¯å¦å«æœ‰ç›Šç”Ÿå…ƒæˆåˆ†ã€‚\n\n> pr <- DSD(years = 2016,probiotic = T)"
  },
  {
    "objectID": "nhanesR.html#ç–¾ç—…è¯Šæ–­æ±‡æ€»",
    "href": "nhanesR.html#ç–¾ç—…è¯Šæ–­æ±‡æ€»",
    "title": "nhanesR",
    "section": "ç–¾ç—…è¯Šæ–­æ±‡æ€»",
    "text": "ç–¾ç—…è¯Šæ–­æ±‡æ€»\n\nä»£è°¢ç»¼åˆå¾\nä½¿ç”¨diag_MetS() ï¼Œä»£è°¢ç»¼åˆå¾æœ‰ä¸¤ç§è®¡ç®—æ–¹æ³•ï¼Œä¸€ç§æ˜¯ATPï¼ˆç¾å›½çš„ï¼‰å’ŒIDFï¼ˆå›½é™…çš„ï¼‰ã€‚ä¸åŒå¹´é¾„çš„è®¡ç®—å…¬å¼ä¸åŒï¼Œchildren and adolescentæœ‰å•ç‹¬çš„ä¸€å¥—æ ‡å‡†ï¼ˆmodified ATPå’ŒIDFï¼‰ã€‚é»˜è®¤ä½¿ç”¨ATPæ ‡å‡†ã€‚å°†åˆ†åˆ«è®¡ç®—>=16å²å’Œ10-16å²çš„è¯Šæ–­ç»“æœ\n\n> x <- diag_MetS(years = 2015)\n\n\n\n\né«˜è¡€å‹\ndiag_Hypertension().\nå…·ä½“çš„é«˜è¡€å‹è¯Šæ–­æ ‡å‡†ï¼šä»»æ„ä¸€ä¸ªæ»¡è¶³\n\næ˜¯å¦ä½¿ç”¨é«˜è¡€å‹è¯ç‰©\ndoctor told you or take drug\nbpxè¡€å‹æµ‹é‡ã€‚åˆ†ä¸ºmeanå’Œtimesï¼Œåœ¨method = é‡Œè®¾å®š\n\n\n> h <- diag_Hypertension(years = 2015,systolic = 140,diastolic = 90,n=3) #è®¾å®šèˆ’å¼ å‹å’Œæ”¶ç¼©å‹é˜ˆå€¼\n> h <- diag_Hypertension(years = 2015,method = \"mean\") #ä½¿ç”¨å‡å€¼æ¥è¯Šæ–­\n> h <- diag_Hypertension(years = 2015,method = \"times\",n=3) #ä½¿ç”¨3æ¬¡æµ‹é‡æ¥åˆ¤æ–­æ˜¯å¦æ‚£æœ‰é«˜è¡€å‹\n\n\n\né«˜è„‚è¡€ç—‡\nåŒ…å—é«˜ç”˜æ²¹ä¸‰é…¯è¡€ç—‡ã€é«˜èƒ†å›ºé†‡è¡€ç—‡ã€å’Œä½¿ç”¨é™è„‚è¯\n\n> d <- diag_Hyperlipidemia(years = 2015)\n\n\n\nç³–å°¿ç—…\nç³–å°¿ç—…è¯Šæ–­æ ‡å‡†\n\ndoctor told you have DM\nres_HbA1cï¼šç³–åŒ–è¡€çº¢è›‹ç™½\nfast glucoseï¼šç©ºè…¹è¡€ç³–ã€‚IFGä¸ºç©ºè…¹è¡€ç³–å—æŸ\nglucoseéšæœºè¡€ç³–å€¼\nOGTT2å°æ—¶ï¼ŒIGTä¸ºç³–è€é‡å—æŸ\ndrug useï¼šantidiabetic å¦‚æœä½¿ç”¨äº†å®éªŒå®¤æ£€æŸ¥ï¼ˆ2~5æ¡ï¼‰ä½œä¸ºè¯Šæ–­æ ‡å‡†ï¼Œåˆ™éœ€è¦ä½¿ç”¨å®éªŒå®¤çš„æƒé‡ï¼Œå¯èƒ½ä¼šä¸§å¤±ä¸€äº›æ•°æ®ï¼Œè¿™æ—¶å€™å¦‚æœä»…ä»…æŠŠç³–å°¿ç—…ä½œä¸ºåå˜é‡æ¥ä½¿ç”¨çš„è¯ï¼Œå¯ä»¥åªç”¨æŠ¥é“çš„ï¼ˆ1å’Œ6æ¡ï¼‰ï¼ŒæŠŠå…¶ä»–çš„å˜é‡éƒ½è®¾ç½®ä¸ºFALSEå³å¯\n\n\n> d <- diag_DM(years = 2015,HbA1c = F,fast_glu = F,OGTT2 = F,rand_glu = F)#å°†å®éªŒå®¤ç»“æœä¸ä½œä¸ºè¯Šæ–­æŒ‡æ ‡\n> \n\n\n\nå¸çƒŸ\nåˆ†ä¸ºä¸‰ç§å¸çƒŸçš„ç±»å‹\n\nneverï¼šsmoked less than 100 cigarettes in life\nformerï¼šsmoked more than 100 cigarettes in life and smoke not at all now\nnowï¼šsmoked more than 100 cigarettes in life and smoke some days or every day\n\n\n> s <- diag_smoke(years = 2015,smoking_years = F)\n\n\n\næŠ‘éƒ\nä½¿ç”¨PHQ-9æŠ‘éƒç­›æŸ¥é‡è¡¨\n\n> x <- diag_PHQ9(years = 2015,cut = c(10,20))\n\n\n\nCKD\nè¯Šæ–­æ ‡å‡†é‡‡ç”¨2021å¹´çš„KDIGOï¼Œæœ‰ä¸¤ç§æ ‡å‡†ï¼ŒeGFRå’Œå°¿ç™½è›‹ç™½ã€‚ä¸¤è€…ç»“åˆå¯ä»¥åˆ¤æ–­é¢„åã€‚å¦‚æœéœ€è¦é‡‡ç”¨ç™½è›‹ç™½çš„æ•°æ®ï¼Œéœ€è¦æ˜¯2005å¹´ä»¥åçš„æ‰è¡Œã€‚ckd = ä¸ºCKDçš„æœ€å°è¯Šæ–­æ ‡å‡†ï¼Œé»˜è®¤ä¸ºè¾¾åˆ°A2å’ŒG3aï¼Œå¯ä»¥è‡ªå·±è°ƒæ•´\n\n\n> e <- diag_CKD(years = 2015,ckd = c(\"A2\",\"G3a\"),\n+               show_prognosis = T,eGFR_method = \"CKD_EPI_Scr\")#é»˜è®¤çš„eGFRçš„è®¡ç®—æ–¹æ³•\n\n\n\nMAFLDä»£è°¢åŠŸèƒ½éšœç¢ç›¸å…³è„‚è‚ªæ€§è‚ç—…\nNAFLDä¸MAFLDï¼Œ2020å¹´å·²ç»å°†NAFLDå»ºè®®è§„çº³å…¥MAFLDä¸­ã€‚NAFLDéœ€è¦æ’é™¤è¿‡é‡é¥®é…’å’Œå…¶ä»–åŸå› çš„è‚è„ç–¾ç—…ï¼ŒMAFLDçš„è¯Šæ–­åˆ™æ˜¯åŸºäºè¶…é‡/è‚¥èƒ–æˆ–T2DMäº¦æˆ–å­˜åœ¨ä¸¤ä¸ªåŠä»¥ä¸Šä»£è°¢å¿ƒè¡€ç®¡å±é™©å› ç´ ã€‚â€œMAFLDâ€è¿™ä¸€å‘½åå¼ºè°ƒäº†è‚¥èƒ–ã€èƒ°å²›ç´ æŠµæŠ—ã€è¡€è„‚å¼‚å¸¸ã€T2DMå’Œç³»ç»Ÿæ€§å…¨èº«ä½åº¦ç‚ç—‡ååº”åœ¨è„‚è‚ªæ€§è‚ç—…å‘ç”Ÿå‘å±•ä¸­çš„é‡è¦ä½œç”¨ã€‚å› æ­¤ï¼Œéœ€è¦æ ¹æ®ä¸åŒçš„æ ‡å‡†å’Œå®šä¹‰é‡æ–°å¯¹è„‚è‚ªæ€§è‚ç—…è¿›è¡Œä¸´åºŠåˆ†ç±»ã€‚å°½ç®¡å¤§å¤šæ•°æ‚£è€…åŒæ—¶ç¬¦åˆMAFLDä¸NAFLDçš„è¯Šæ–­æ ‡å‡† (MAFLD+NAFLD+)ï¼Œä½†æ˜¯ä»æœ‰éƒ¨åˆ†æ‚£è€…ä»…ç¬¦åˆNAFLDè¯Šæ–­æ ‡å‡†(MAFLD-NAFLD+) æˆ–ä»…ç¬¦åˆMAFLDè¯Šæ–­æ ‡å‡†(MAFLD+NAFLD-)ã€‚ä¹Ÿå°±æ˜¯è¯´ï¼Œå¹¶ä¸æ˜¯æ‰€æœ‰çš„NAFLDéƒ½å¯ä»¥ç›´æ¥å½’ç±»ä¸ºMAFLDï¼Œåä¹‹äº¦ç„¶ã€‚\nMAFLDçš„è¯Šæ–­æ ‡å‡†ï¼šå‚è€ƒæ–‡çŒ®.pdf\n\nä¸»è¦æ ‡å‡†ï¼šSteatosisï¼ˆå¿…é¡»æœ‰è‚è„‚è‚ªå˜çš„è¯æ®ï¼‰ï¼šç”¨çš„è¶…å£°CAPè¡°å‡æŒ‡æ•°\næ¬¡è¦æ ‡å‡†ï¼šæ»¡è¶³ä»»æ„ä¸€ä¸ª\n\nBMIï¼š>25\nDM\nmetabolic dysfunction: 6ä¸ªæŒ‡æ ‡ï¼ˆwaistï¼Œhypertensionï¼Œhyperlipidemiaï¼Œlow HDL-C levelï¼Œprediabetesï¼ˆç©ºè…¹è¡€ç³–å—æŸå’Œç³–è€é‡å—æŸï¼‰ï¼Œhypersensitive C-reactive protein level>2mg/L\n\n\n\n> d <- diag_MAFLD(years = 2015)#å…¶ä½™å‚æ•°å¯ä»¥æŒ‡å®šæ˜¯å¦è¿”å›è¯Šæ–­æ¡ä»¶çš„ç»“æœ"
  },
  {
    "objectID": "nhanesR.html#fpedæ•°æ®åº“",
    "href": "nhanesR.html#fpedæ•°æ®åº“",
    "title": "nhanesR",
    "section": "FPEDæ•°æ®åº“",
    "text": "FPEDæ•°æ®åº“\nFood pattern equivalent databaseï¼šé£Ÿç‰©æ¨¡å¼ç­‰é‡æ•°æ®åº“ï¼›å°†NHANESä¸­çš„é£Ÿç‰©å’Œé¥®æ–™è½¬åŒ–ä¸º37ç§USDAé£Ÿç‰©æ¨¡å¼ç»„åˆ†ã€‚ä¸»è¦åŒ…å«9ç±»ï¼šFruit(cup), vegetables(cup), grains(oz), dairy(cup), protein food(oz), added sugars(tsp), oils(grams), solid fats(grams), alcoholic drinks(no.)\nå®é™…æ˜¯NHANESçš„iffç»“åˆFNDDså¾—å‡ºçš„ç»“æœï¼Œæ‰€ä»¥åŒæ ·åŒ…å«ä¸¤å¤©çš„æ•°æ®ã€‚1999-2002åªæœ‰1å¤©çš„æ•°æ®ã€‚æƒé‡æœ‰å„è‡ªçš„æƒé‡\n\n\n\næ•°æ®æå–é€‰é¡¹ï¼Œå¦‚æœé€‰æ‹©both2day=Tï¼Œé‚£ä¹ˆåªæœ‰ä¸¤å¤©å‡æœ‰æ•°æ®æ—¶æ‰ä¼šä¿ç•™\n\n\n\niffå’Œtotçš„åŒºåˆ«ï¼šä¸¤è€…å‡ä¸åŒ…æ‹¬ä»è†³é£Ÿè¡¥å……å‰‚ã€è¯ç‰©æˆ–æ™®é€šé¥®ç”¨æ°´ä¸­æ‘„å–çš„è¥å…»\ntotæ˜¯Total Nutrient Intakes: åŒ…æ‹¬æ¯å¤©ä»é£Ÿç‰©å’Œé¥®æ–™ä¸­æ‘„å…¥çš„æ€»è¥å…»ï¼Œæ‘„å…¥çš„æ€»æ°´é‡\niffæ˜¯Individual Foods Filesï¼šåŒ…æ‹¬å•ä¸ªé£Ÿç‰©çš„ç±»å‹å’Œæ•°é‡çš„è¯¦ç»†ä¿¡æ¯ï¼Œä»¥åŠæ¯ç§é£Ÿç‰©çš„è¥å…»å«é‡\n2003å¹´ä»¥åæ‰ä¼šæœ‰2å¤©çš„æ•°æ®\n\n\nFruit\nfruitåˆ†ä¸ºintact/cut fruit, juice, totalã€‚Citrus, Melons and Berries; Other Fruits; Fruit juice\n\n> d <- db_fped(years = 2005,dietary = \"tot\",day = 1,\n+              f_whole = T,f_citmlb = T,f_other = T,f_juice = T,f_total = T)\n> #citmlb,other,wholeéƒ½æ˜¯æ•´æœï¼ˆintact/cut fruit), whole=citmlb+other\n\n\n\nVegetables\nè”¬èœåˆ†ä¸º6ç±»ï¼š\n\ndark greenï¼šv_drkgr\nred orange: v_redor_tomato,v_redor_other, v_redor_total\nstarchy: v_starchy_potato, v_starchy_other, v_starchy_total\nother: v_other\ntotal: v_totalï¼ˆä¸åŒ…æ‹¬legumesï¼‰\nlegumes: v_legumes\n\n\n> d <- db_fped(years = 2015,v_drkgr = T) #ä»¥v_å¼€å¤´\n\n\n\nGrains\nåŒ…æ‹¬æ•´è°·ç‰©ï¼ˆg_whole), refined or non-whole grainsï¼ˆg_refinedï¼‰, å’Œg_total, å•ä½æ˜¯ç›å¸oz\n\n> g <- db_fped(years = 2015,g_whole = T)\n\n\n\nDairy\nä¹³åˆ¶å“å•ä½æ˜¯cupã€‚åŒ…æ‹¬d_milk, d_yogurt, d_cheese, d_total\n\n\nProtein foods\nè›‹ç™½è´¨ç±»ï¼Œå•ä½æ˜¯ç›å¸ã€‚\n\nä¸»è¦åˆ†ä¸ºæ¤ç‰©è›‹ç™½ã€è‚‰ç±»ã€é¸¡è›‹ã€‚è‚‰ç±»åˆåˆ†ä¸ºè…Œè‚‰ã€ç”Ÿè‚‰ã€å†…è„ã€å¹¼ç¦½ã€æµ·äº§å“ï¼ˆé«˜ä½n-3è„‚è‚ªé…¸ï¼‰ï¼›æ¤ç‰©è›‹ç™½åŒ…æ‹¬è±†åˆ¶å“ï¼Œåšæœç±»ï¼Œè±†ç±»\n\n> d <- db_fped(years = 2005,pf_curedmeat = T)\n\n\n\nOthers\n\nadd sugars(tsp): æ·»åŠ ç³–â€”â€“ add_sugars\nOils(gram): oils\nSolid fat(grams)ï¼šå›ºæ€è„‚è‚ª solid_fat\nalcoholic drinks(no.): a_drinks; alcoholic beverage"
  },
  {
    "objectID": "nhanesR.html#æ˜“ä¾•",
    "href": "nhanesR.html#æ˜“ä¾•",
    "title": "nhanesR",
    "section": "æ˜“ä¾•",
    "text": "æ˜“ä¾•\n\nå¦‚ä½•å°†nhanesRçš„æ•°æ®ç›´æ¥å†™å…¥åˆ°æ˜“ä¾•ä¸­\nå…ˆæ•´ç†å¥½æ•°æ®ï¼Œç„¶åä½¿ç”¨write.yier(), æŒ‡å®šå¯¼å‡ºçš„dfï¼Œå¯ä»¥ä¿®æ”¹fileçš„åå­—å’Œprojectçš„åå­—ã€‚ç„¶åå°±ä¼šåœ¨æ˜“ä¾•çš„Analysisæ–‡ä»¶ä¸‹ç”Ÿæˆä¸€ä¸ªprojectçš„æ–‡ä»¶å¤¹ã€‚å…¶ä¸­æœ‰ä¸€ä¸ªtxtæ–‡ä»¶å’Œä¸€ä¸ªexcelæ–‡ä»¶ï¼Œtxtæ˜¯æ•°æ®æ–‡ä»¶ï¼Œexcelæ˜¯å˜é‡åçš„å¯¹ç…§è¡¨ã€‚\n\n> newproject <- db_demo(years = 2015,Year = T,ageyr = \"age\",sex = \"sex\") |> \n+   db_Alcohol.drinks() |> \n+   dex_DII()\n> # Factor(new)\n> new$Year <- factor(new$Year, c('2015-2016'))\n> new$sex <- factor(new$sex, c('Male', 'Female'))\n> \n> write.yier(df = x,file = \"mydata\")#å¯¼å‡ºæ•°æ®"
  },
  {
    "objectID": "nhanesR.html#æ–‡çŒ®å¤ç°",
    "href": "nhanesR.html#æ–‡çŒ®å¤ç°",
    "title": "nhanesR",
    "section": "æ–‡çŒ®å¤ç°",
    "text": "æ–‡çŒ®å¤ç°\n\n1. ä¸­æ€§ç²’ç»†èƒå‡å°‘çš„æµè¡Œç—…å­¦\nPrevalence of Neutropenia in the U.S. Population: Age, Sex, Smoking, Status, and Ethnic Differencesâ€“å‚è€ƒæ–‡çŒ®\nå¹´ä»½ï¼š1999-2004ï¼Œé‡‡ç”¨çš„æƒé‡æ˜¯MECæƒé‡ï¼Œ1999-2002ï¼šwtmec4yrÃ—2/3ï¼›2003-2004ï¼šwtmec2yrÃ—1/3\n\næå–æ•°æ®\n\n\n> library(nhanesR)\n> library(reshape2)\n> library(do)\n> d_demo <- db_demo(years = 1999:2004, ageyr = \"age\", sex = \"sex\", eth1 = \"eth\", \n+                   wtmec4yr = T,wtmec2yr = T,Year = T)#æå–äººå£å­¦æ•°æ®\n> d_demo$nhs_wt <- ifelse(d_demo$Year %in% c(\"1999-2000\",\"2001-2002\"),\n+                         2/3*d_demo$wtmec4yr,1/3*d_demo$wtmec2yr)#è®¡ç®—åˆå¹¶æƒé‡\n> d_demo <- drop_col(d_demo,\"wtmec4yr\",\"wtmec2yr\")#åˆ é™¤åŸæ¥çš„ä¸¤åˆ—æƒé‡\n> \n> d_demo <- d_demo[d_demo$age>=1,]#ç ”ç©¶çš„æ˜¯1å²å³ä»¥ä¸Šçš„äººç¾¤ï¼Œè¿›è¡Œäº†è¿›ä¸€æ­¥çš„MECæ£€æŸ¥\n> \n> d_cbc1 <- db_cbc(years = 1999:2004,wbc_1000cells.ul = \"wbc\",\n+                 Segmented_neutrophils_number_1000cells.ul = \"Neu\",\n+                 lymphocyte_number_1000cells.ul = \"Lym\",\n+                 hemoglobin_g.dl = \"Hb\",\n+                 Platelet_count_1000cells.uL = \"Plt\")#æå–å®éªŒå®¤æ£€æŸ¥è¡€æ¶²çš„æ•°æ®\n> nrow(d_demo)-nrow(d_cbc)#è¢«å‘ŠçŸ¥å»MECçš„æœ‰29608äººï¼Œå…¶ä¸­æ²¡æœ‰å»åšMECæ£€æŸ¥çš„æœ‰1668äºº\n> \n> d_cbc <- complete.data(d_cbc1)#ğŸ˜Šç§»é™¤ç¼ºå¤±å€¼ï¼Œæ˜¾ç¤ºæœ‰2715ä¸ªNAã€‚æ–‡ä¸­æŠ¥å‘Šäº†3ä¸ªå¼‚å¸¸å€¼ï¼Œä½†å…¶å®åº”è¯¥æ²¡æœ‰\n> nrow(d_cbc) # 25225 complete cbc\n> \n> d <- Inner_Join(d_demo,d_cbc)#åˆå¹¶äººå£å­¦æ•°æ®å’Œå®éªŒå®¤æ•°æ®\n\n\nå¤æ‚æŠ½æ ·çš„åŠ æƒ\n\n\n> nhs <- svy_design(data = d) #éœ€è¦å°†åˆå¹¶æƒé‡å˜é‡åè®¾ç½®ä¸ºnhs_wtï¼Œpsuå’Œstrataéƒ½æ˜¯æŒ‡å®šå¥½çš„\n\n\næ€»äººå£å’Œç¼ºå¤±äººç¾¤åˆ†æ\n\n\n> svy_population(design = nhs)#ğŸ˜Šparticipantsä»£è¡¨çš„æ€»äººå£æ•°\n> #The 25 222 NHANES participants with valid hematologic indices represented 253.2 million noninstitutionalized residents of the United States\n> \n> # Recode(d$eth)\n> d$eth <- Recode(d$eth,\n+   \"Non-Hispanic White::white\", \n+   \"Non-Hispanic Black::black\", \n+   \"Other Race - Including Multi-Racial::others\", \n+   \"Mexican American::Mexican\", \n+   \"Other Hispanic::others\",\n+   to.numeric = FALSE)\n> \n> miss_seqn <- d_cbc1$seqn[!complete.cases(d_cbc1)]#ğŸ˜Šæå–å‡ºcbcé‡Œé¢ç¼ºå¤±äº†æ•°æ®çš„seqnåºå·\n> demo_miss <- d_demo[d_demo$seqn %in% miss_seqn,]#ä»d_demoæ•°æ®é‡Œæå–ç¼ºå¤±çš„seqnè¡Œ\n> freq_count(demo_miss,x = \"eth\")#ğŸ˜Šç§æ—çš„åˆ†å¸ƒ\n> \n> bu_x <- demo_miss$age #å°†å¹´é¾„è¿›è¡Œåˆ†ç»„ç”Ÿæˆæ–°çš„åˆ—age_group\n> demo_miss$age_group[bu('( ,5 ]')] <- \"<=5\"   \n> demo_miss$age_group[bu('( 6, 17]')] <- \"6-17\"\n> demo_miss$age_group[bu('[ 18, )')] <- \">=18\"\n> freq_count(demo_miss,x = \"age_group\")#ğŸ˜å¹´é¾„åˆ†å±‚çš„åˆ†å¸ƒ\n> \n> #ç»Ÿè®¡äººç§çš„åˆ†å¸ƒå…¶å®æ˜¯çœ‹æ˜¯å¦æœ‰ç‰¹å®šçš„ç§æ—ç¼ºå¤±å¤ªå¤šï¼Œä¾‹å¦‚å¤§é‡çš„ç™½äººéƒ½ä¸æ¥æµ‹ï¼Œè¿™æ ·çš„è¯æ•°æ®çš„ä»£è¡¨æ€§å°±ä¼šå¾ˆå·®\n\n\nçº¿æ€§å›å½’æ¯”è¾ƒä¸åŒç§æ—ç»†èƒè®¡æ•°çš„å˜åŒ–ï¼šæ ¡æ­£å¹´é¾„ã€æ€§åˆ«\nç›®å‰å¾—åˆ°äº†ä¸¤å¥—æ•°æ®ï¼Œä¸€å¥—æ˜¯åŸå§‹æ•°æ®dï¼Œä¸€å¥—æ˜¯åŠ æƒåçš„æ•°æ®nhsã€‚å¦‚æœè¦ä¿®æ”¹æˆ–è€…å¢åˆ æ•°æ®ï¼Œéƒ½å…ˆåœ¨åŸå§‹æ•°æ®dä¸­ä¿®æ”¹ï¼Œä¹‹åå†è½¬æ¢ä¸ºåŠ æƒåçš„æ•°æ®nhsã€‚å¦‚æœè¦å–å­é›†ï¼ˆåˆ†å±‚ï¼‰ï¼Œå°±ç›´æ¥åœ¨nhsåŠ æƒæ•°æ®ä¸Šæ“ä½œï¼ˆä½¿ç”¨subsetï¼‰ã€‚é‡‡ç”¨å¹¿ä¹‰çº¿æ€§æ¨¡å‹æ¥è¿›è¡Œçº¿æ€§å›å½’\n\n\n> library(survey)\n> d$eth <- factor(d$eth,levels = c(\"white\", \"black\",\"Mexican\", \"others\"))#unique(d$eth) |> dput() å¯ä»¥ç›´æ¥ç”Ÿæˆlevels\n> nhs <- svy_design(data = d)#ä¿®æ”¹å®Œä»¥åå†åŠ æƒ\n> \n> svyglm(formula = wbc~eth + age +sex,design = nhs) |> summary()#ä½¿ç”¨surveyåŒ…çš„å¹¿ä¹‰çº¿æ€§æ¨¡å‹å›å½’\n\n\n\n\nçº¿æ€§å›å½’çš„ç»“æœ\n\n\næ ¹æ®ç»“æœå¯ä»¥å¾—å‡ºï¼Œç™½ç»†èƒè®°æ•°çš„å‡å€¼ï¼Œé»‘äººæ¯”ç™½äººä½0.86,å¢¨è¥¿å“¥äººæ¯”ç™½äººé«˜0.17\n\n> #æ¯”è¾ƒä¸­æ€§ç²’ç»†èƒ\n> svyglm(formula = Neu~eth + age +sex,design = nhs) |> summary()"
  },
  {
    "objectID": "nhanesR.html#æ£€ç´¢è¡¨",
    "href": "nhanesR.html#æ£€ç´¢è¡¨",
    "title": "nhanesR",
    "section": "æ£€ç´¢è¡¨",
    "text": "æ£€ç´¢è¡¨\n\n> Left_Join(d1,d2,inspect = \"\")#åˆå¹¶ï¼ŒæŸ¥çœ‹å˜é‡åˆå¹¶å‰åå˜åŒ–\n> db_demo()#äººå£å­¦æ•°æ®\n> db_cbc()#å…¨è¡€ç»†èƒç±»å‹çš„æ•°æ®\n> dex_phenoAge()#ç”Ÿç‰©å­¦å¹´é¾„\n> add_col()#æ·»åŠ åˆ—\n> select_row()#ä¿ç•™æŸäº›è¡Œ,%in%, ==, !==, >=\n> dro_row(is.na())#å»é™¤æŸäº›è¡Œï¼Œå¦‚NAç­‰\n> db_slq()#ç¡çœ éšœç¢ç›¸å…³æ•°æ®\n> db_PbCd()#é‡é‡‘å±ç›¸å…³æ•°æ®\n> db_Alcohol.drinks()#æå–é…’ç²¾ä½¿ç”¨drinks/dayçš„æ•°æ®\n> db_drtot(alcohol_g = )#æå–é…’ç²¾ä½¿ç”¨g/day\n> diag_alcohol.user()#é…’ç²¾ä½¿ç”¨ç¨‹åº¦"
  },
  {
    "objectID": "Python.html",
    "href": "Python.html",
    "title": "Python",
    "section": "",
    "text": "The reticulate package provides a comprehensive set of tools for interoperability between Python and Rã€‚å®˜æ–¹æ–‡æ¡£ Cheatsheet\n\nlibrary(reticulate)\nuse_miniconda(condaenv = \"/Users/liulinhu/Library/r-miniconda\")#é€‰æ‹©minicondaç¯å¢ƒçš„python\nuse_condaenv(\"r-reticulate\")#é€‰æ‹©condaç¯å¢ƒçš„python\nminiconda_path()#æ˜¾ç¤ºminicondaå®‰è£…åœ°å€\n\nå¯ä»¥ä½¿ç”¨minicondaæ¥ç®¡ç†pythonåº“ä¹Ÿå¯ä»¥ç”¨r-reticulateçš„ç¯å¢ƒæ¥ç®¡ç†ï¼Œé€‰æ‹©use_minicondaæˆ–è€…use_condaenvæ¥é…ç½®ã€‚å®‰è£…pythonåŒ…å¯ä»¥ç”¨py_install()ç›´æ¥ç®¡ç†r-reticulateä¸‹çš„ç¯å¢ƒï¼Œæˆ–è€…ä½¿ç”¨conda installation\n\npy_install(\"pandas\")\npy_module_available(\"pandas\") #æŸ¥çœ‹æ˜¯å¦å®‰è£…æˆåŠŸ\nrepl_python()# å¼€å§‹ä½¿ç”¨pythonï¼Œå¦‚æœéœ€è¦é€€å‡ºï¼Œè¾“å…¥exit\npd <- import(\"pandas\")#å¯¼å…¥pythonåº“\nnp <- import(\"numpy\")\n\n\n\nreticulateæä¾›äº†ä¸‰ç§æ–¹å¼è°ƒç”¨python\n\nç›´æ¥åœ¨R markdownä¸­ç”¨ä»£ç å—åŒºåˆ†ï¼šå¯æ‰“å°pythonè¾“å‡ºï¼ŒåŒ…æ‹¬matplotlibçš„å›¾å½¢è¾“å‡ºï¼Œå¯ä»¥åœ¨rä¸­è®¿é—®pythonçš„å¯¹è±¡ï¼ˆä½¿ç”¨py$å¯¹è±¡ï¼‰ï¼Œåä¹‹ç”¨r.å¯¹è±¡ä»pythonä¸­è®¿é—®rå¯¹è±¡. ä¾‹å¦‚åœ¨pythonä¸­ç”¨pandaså¯¼å…¥æ•°æ®ï¼Œç„¶ååœ¨Rä¸­ç”¨pyå¯¹è±¡è¿›è¡Œç»˜å›¾\nä½¿ç”¨import()å‡½æ•°åœ¨Rä¸­è°ƒç”¨pythonçš„æ¨¡å— \nsource_python()å’Œpy_run_file()\nä½¿ç”¨reticulateåŒ…ä¸­çš„source_python(â€˜pyæ–‡ä»¶è·¯å¾„â€™)å¯ä»¥å¯¼å…¥pyæ–‡ä»¶ä¸­çš„å˜é‡ï¼Œè¿™æ ·å°±å¯ä»¥åœ¨Rä»£ç å—ä¸­ä½¿ç”¨å¤–éƒ¨å˜é‡ã€‚ä½¿ç”¨py_run_file()å¯ä»¥åœ¨Rä»£ç å—ä¸­è¿è¡Œé¡¹ç›®æ–‡ä»¶å¤¹ä¸­çš„pyæ–‡ä»¶"
  },
  {
    "objectID": "NHANES.html",
    "href": "NHANES.html",
    "title": "NHANES Tutorial",
    "section": "",
    "text": "æ”¶è—å¤¹\n\nç”¨Rè¯­è¨€surveyåŒ…è¿›è¡Œæƒé‡è®¡ç®—\nnhanesRä¸»ç½‘ç«™\n\nç½‘é¡µç‰ˆnhanesR\n\nè´¦æˆ·95096026547614500\nå¯†ç 48870131932211800\n\nRmarkdownå¦‚æœè¦è¾“å‡ºä¸­æ–‡çš„pdfï¼šå…ˆæ‰¾åˆ°Ctexçš„æ¨¡æ¿ï¼ŒæŒ‰ç…§æ¨¡æ¿æ¥è°ƒå‚æ•°ç¤ºæ„å›¾.png\nä¸åŒå¹´ä»½çš„æŸäº›å˜é‡å¯èƒ½ä¼šå‘ç”Ÿå˜åŒ–ï¼Œç®€å†™å¯èƒ½å‘ç”Ÿå˜åŒ–ï¼Œä½†æ˜¯è¦æ ¹æ®å…¶å®é™…å«ä¹‰æ¥ï¼Œå¯èƒ½æ˜¯åŒä¸€ä¸ªä¸œè¥¿ã€‚ä¹Ÿæœ‰å¯èƒ½éƒ½æ˜¯ä¸€ä¸ªåå­—ï¼Œä½†æ˜¯ä¸æ˜¯åŒä¸€ä¸ªä¸œè¥¿ï¼Œä¾‹å¦‚è¡€ç³–ï¼Œå¯èƒ½éƒ½æ˜¯è¡€ç³–ï¼Œä½†æ˜¯æœ‰çš„æ˜¯ç©ºè…¹è¡€ç³–ï¼Œæœ‰çš„æ˜¯é¤å2hè¡€ç³–\n\næ ¹æ®å˜é‡çš„å®é™…æ„ä¹‰æ¥é€‰æ‹©ï¼Œä¸ç”¨è¿‡äºåœ¨æ„å˜é‡çš„åå­—\n\né‡è¦çš„åŠŸèƒ½ï¼š\n\nnhs_tsv()ç”¨äºæå–æ•°æ®\nnhs_brief()ç”¨äºæŸ¥è¯¢ä¸Šä¸€æ­¥æå–çš„tsvæ–‡ä»¶\nnhs_read()ç”¨äºå°†æå–å‡ºæ¥çš„tsvæŒ‘é€‰å˜é‡æˆ–é‡å‘½åï¼Œè§£ç å«ä¹‰ç­‰åç”Ÿæˆæ–°çš„æ•°æ®é›†"
  }
]